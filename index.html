<!DOCTYPE html>
<html>
<head>
    <title>üß™ TEST √âL√àVES & COURS</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f7fa; }
        .container { display: flex; gap: 20px; }
        .card { 
            background: white; 
            padding: 20px; 
            border-radius: 15px; 
            flex: 1;
            border-left: 5px solid #ffb347;
        }
        button { 
            background: #ffb347; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 30px;
            cursor: pointer;
        }
        input, textarea { 
            width: 100%; 
            padding: 8px; 
            margin: 5px 0; 
            border: 2px solid #ddd; 
            border-radius: 10px;
        }
        .data-list { 
            margin-top: 15px; 
            max-height: 200px; 
            overflow-y: auto; 
        }
        .item { 
            background: #f0f0f0; 
            padding: 8px; 
            margin: 5px 0; 
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>üîç TEST √âL√àVES & COURS</h1>

    <div class="container">
        <!-- Carte √âL√àVES -->
        <div class="card">
            <h2>üë®‚Äçüéì √âL√àVES</h2>
            <p>URL: <code>70923d86-6d1a-4756-bf21-a869acf3e029</code></p>
            
            <input type="text" id="eleveNom" placeholder="Nom">
            <input type="text" id="elevePrenom" placeholder="Pr√©nom">
            <input type="text" id="eleveClasse" placeholder="Classe">
            <button onclick="ajouterEleve()">‚ûï Ajouter √©l√®ve</button>
            <button onclick="voirEleves()">üìã Voir √©l√®ves</button>
            
            <div id="listeEleves" class="data-list"></div>
        </div>

        <!-- Carte COURS -->
        <div class="card">
            <h2>üìö COURS</h2>
            <p>URL: <code>0073e64e-80ab-4337-b6b9-df0c2ce14cd3</code></p>
            
            <input type="text" id="coursTitre" placeholder="Titre">
            <input type="text" id="coursProf" placeholder="Professeur">
            <textarea id="coursDesc" placeholder="Description" rows="2"></textarea>
            <select id="coursType">
                <option value="pdf">PDF</option>
                <option value="video">Vid√©o</option>
            </select>
            <input type="text" id="coursLien" placeholder="Lien">
            <button onclick="ajouterCours()">‚ûï Ajouter cours</button>
            <button onclick="voirCours()">üìã Voir cours</button>
            
            <div id="listeCours" class="data-list"></div>
        </div>
    </div>

    <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const API = {
        eleves: 'https://api.sheetbest.com/sheets/70923d86-6d1a-4756-bf21-a869acf3e029',
        cours: 'https://api.sheetbest.com/sheets/0073e64e-80ab-4337-b6b9-df0c2ce14cd3'
    };

    // ============================================
    // FONCTIONS POUR LES √âL√àVES
    // ============================================
    async function voirEleves() {
        try {
            const res = await fetch(API.eleves);
            const data = await res.json();
            
            let html = '';
            data.forEach(e => {
                html += `
                    <div class="item">
                        üë§ ${e.nom || ''} ${e['pr√©nom '] || e.prenom || ''} - ${e['classe '] || e.classe || ''}
                    </div>
                `;
            });
            document.getElementById('listeEleves').innerHTML = html || '<p>Aucun √©l√®ve</p>';
        } catch (err) {
            alert('Erreur: ' + err.message);
        }
    }

    async function ajouterEleve() {
        const nom = document.getElementById('eleveNom').value;
        const prenom = document.getElementById('elevePrenom').value;
        const classe = document.getElementById('eleveClasse').value;
        
        if (!nom || !prenom || !classe) {
            alert('Tous les champs sont requis');
            return;
        }
        
        try {
            const res = await fetch(API.eleves, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify([{ nom, prenom, classe }])
            });
            
            if (res.ok) {
                alert('‚úÖ √âl√®ve ajout√© !');
                document.getElementById('eleveNom').value = '';
                document.getElementById('elevePrenom').value = '';
                document.getElementById('eleveClasse').value = '';
                voirEleves();
            }
        } catch (err) {
            alert('Erreur: ' + err.message);
        }
    }

    // ============================================
    // FONCTIONS POUR LES COURS
    // ============================================
    async function voirCours() {
        try {
            const res = await fetch(API.cours);
            const data = await res.json();
            
            let html = '';
            data.forEach(c => {
                html += `
                    <div class="item">
                        üìò ${c.titre || ''} - ${c.professeur || ''}<br>
                        <small>${c.type || ''}</small>
                    </div>
                `;
            });
            document.getElementById('listeCours').innerHTML = html || '<p>Aucun cours</p>';
        } catch (err) {
            alert('Erreur: ' + err.message);
        }
    }

    async function ajouterCours() {
        const titre = document.getElementById('coursTitre').value;
        const prof = document.getElementById('coursProf').value;
        const desc = document.getElementById('coursDesc').value;
        const type = document.getElementById('coursType').value;
        const lien = document.getElementById('coursLien').value;
        
        if (!titre || !prof || !desc || !lien) {
            alert('Tous les champs sont requis');
            return;
        }
        
        try {
            const res = await fetch(API.cours, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify([{ 
                    titre, 
                    professeur: prof, 
                    description: desc, 
                    type, 
                    lien 
                }])
            });
            
            if (res.ok) {
                alert('‚úÖ Cours ajout√© !');
                document.getElementById('coursTitre').value = '';
                document.getElementById('coursProf').value = '';
                document.getElementById('coursDesc').value = '';
                document.getElementById('coursLien').value = '';
                voirCours();
            }
        } catch (err) {
            alert('Erreur: ' + err.message);
        }
    }

    // Charger les donn√©es au d√©marrage
    voirEleves();
    voirCours();
    </script>
</body>
</html>

