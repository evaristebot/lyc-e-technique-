<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Lyc√©e Technique de Batouri - Site Officiel</title>
  
  <!-- META POUR GOOGLE -->
  <meta name="description" content="Site officiel du Lyc√©e Technique de Batouri. Informations, administration, bulletins, anciens √©l√®ves et actualit√©s.">
  <meta name="keywords" content="Lyc√©e Technique, Batouri, √©ducation, Cameroun, bulletins, anciens √©l√®ves">
  <meta name="author" content="Lyc√©e Technique de Batouri">
  
  <!-- LOGO POUR GOOGLE -->
  <link rel="icon" type="image/jpg" href="logo.jpg">
  <link rel="apple-touch-icon" href="logo.jpg">
  
  <!-- OPEN GRAPH (partage r√©seaux) -->
  <meta property="og:title" content="Lyc√©e Technique de Batouri">
  <meta property="og:description" content="Site officiel du Lyc√©e Technique de Batouri">
  <meta property="og:image" content="logo.jpg">
  <meta property="og:url" content="https://lycee-batouri.vercel.app">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #e9edf5 100%);
      color: #0b2f2f;
      line-height: 1.6;
    }
    
    /* Navigation */
    .navbar {
      background: #0b2f2f;
      color: white;
      padding: 1rem 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    
    .nav-logo img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .nav-logo span {
      font-size: 1.3rem;
      font-weight: bold;
      color: #ffb347;
    }
    
    .nav-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .nav-links button {
      background: transparent;
      border: 2px solid #ffb347;
      color: white;
      padding: 8px 16px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .nav-links button:hover {
      background: #ffb347;
      color: #0b2f2f;
    }
    
    /* Pages */
    .page {
      display: none;
      padding: 2rem 5%;
      animation: fadeIn 0.5s;
    }
    
    .page.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Accueil */
    .hero {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .logo-large {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 5px solid #ffb347;
      margin: 1rem auto;
    }
    
    h1 {
      color: #0b2f2f;
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    h2 {
      color: #0b2f2f;
      margin: 2rem 0 1rem;
    }
    
    .presentation {
      max-width: 800px;
      margin: 0 auto 3rem;
      text-align: center;
    }
    
    .text {
      background: white;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 1.5rem;
    }
    
    /* Boutons */
    .btn {
      background: #ffb347;
      color: #0b2f2f;
      border: 2px solid #ffb347;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      margin: 5px;
    }
    
    .btn:hover {
      background: transparent;
      color: #ffb347;
    }
    
    .btn-secondary {
      background: transparent;
      border: 2px solid #0b2f2f;
      color: #0b2f2f;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .btn-secondary:hover {
      background: #0b2f2f;
      color: white;
    }
    
    .btn-wa {
      background: #25D366;
      color: white;
      border: 2px solid #25D366;
    }
    
    .btn-wa:hover {
      background: transparent;
      color: #25D366;
    }
    
    .btn-danger {
      background: #ff4444;
      color: white;
      border: 2px solid #ff4444;
    }
    
    .btn-danger:hover {
      background: transparent;
      color: #ff4444;
    }
    
    /* Grilles */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin: 2rem 0;
    }
    
    .card {
      background: white;
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      transition: transform 0.3s;
      text-align: center;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #ffb347;
      margin-bottom: 1rem;
    }
    
    /* Formulaires */
    .form-container {
      max-width: 600px;
      margin: 2rem auto;
      background: white;
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    }
    
    .form-input {
      width: 100%;
      padding: 12px 15px;
      margin: 10px 0;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 1rem;
    }
    
    .form-input:focus {
      border-color: #ffb347;
      outline: none;
    }
    
    .form-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    
    /* Administration */
    .admin-section {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    
    .admin-section h3 {
      color: #0b2f2f;
      border-bottom: 3px solid #ffb347;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    
    /* Password box */
    .password-box {
      background: #0b2f2f;
      color: white;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    /* Recherche r√©sultats */
    .result-item {
      background: #f9f9f9;
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      border-left: 5px solid #ffb347;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        gap: 15px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .nav-links {
        justify-content: center;
      }
    }
  </style>
</head>
<body>

<!-- Navigation -->
<nav class="navbar">
  <div class="nav-logo" onclick="showPage('home')">
    <img src="logo.jpg" alt="Logo Lyc√©e">
    <span>Lyc√©e Technique de Batouri</span>
  </div>
  <div class="nav-links">
    <button onclick="showPage('home')">üè† Accueil</button>
    <button onclick="showPage('administration')">üë®‚Äçüè´ Administration</button>
    <button onclick="showPage('anciens')">üéì Anciens √âl√®ves</button>
    <button onclick="showPage('journal')">üì∞ Journal</button>
    <button onclick="showPage('bulletins')">üìÑ Bulletins</button>
    <button onclick="showPage('recherche')">üîç Recherche</button>
    <button onclick="showPage('admin')">‚öôÔ∏è Admin</button>
  </div>
</nav>

<!-- ACCUEIL -->
<div id="home" class="page active">
  <div class="hero">
    <img src="logo.jpg" class="logo-large" id="mainLogo">
    <h1>Lyc√©e Technique de Batouri</h1>
  </div>
  
  <div class="presentation">
    <div class="text">
      <h2>Bienvenue au Lyc√©e Technique de Batouri</h2>
      <p>Le Lyc√©e Technique de Batouri est un √©tablissement d'enseignement secondaire technique situ√© dans la r√©gion de l'Est-Cameroun. Nous formons les jeunes aux m√©tiers techniques et industriels depuis 1985.</p>
      <p>Notre mission : former des techniciens comp√©tents, responsables et pr√™ts √† contribuer au d√©veloppement du Cameroun et de l'Afrique.</p>
      <p><strong>Excellence, Discipline, Travail</strong> - Notre devise.</p>
    </div>
    
    <button class="btn" onclick="showPage('administration')">D√©couvrir l'administration</button>
  </div>
  
  <!-- Photos du lyc√©e (galerie) -->
  <h2 style="text-align: center;">üì∏ Notre Lyc√©e en Images</h2>
  <div class="grid" id="gallery">
    <div class="card">
      <img src="photo1.jpg" alt="B√¢timent principal" onerror="this.src='https://via.placeholder.com/120?text=Photo1'">
      <p>B√¢timent principal</p>
    </div>
    <div class="card">
      <img src="photo2.jpg" alt="Atelier m√©canique" onerror="this.src='https://via.placeholder.com/120?text=Photo2'">
      <p>Atelier m√©canique</p>
    </div>
    <div class="card">
      <img src="photo3.jpg" alt="Salle informatique" onerror="this.src='https://via.placeholder.com/120?text=Photo3'">
      <p>Salle informatique</p>
    </div>
    <div class="card">
      <img src="photo4.jpg" alt="Biblioth√®que" onerror="this.src='https://via.placeholder.com/120?text=Photo4'">
      <p>Biblioth√®que</p>
    </div>
  </div>
</div>

<!-- ADMINISTRATION -->
<div id="administration" class="page">
  <h1>üë®‚Äçüè´ Notre Administration</h1>
  <div class="grid" id="adminList">
    <div class="card">
      <img src="proviseur.jpg" alt="Proviseur" onerror="this.src='https://via.placeholder.com/120?text=Proviseur'">
      <h3>M. Jean NTOMBA</h3>
      <p><strong>Proviseur</strong></p>
      <p>En poste depuis 2020</p>
    </div>
    <div class="card">
      <img src="ct.jpg" alt="Chef des travaux" onerror="this.src='https://via.placeholder.com/120?text=Chef'">
      <h3>M. Pierre ESSOMBA</h3>
      <p><strong>Chef des travaux</strong></p>
      <p>Ateliers techniques</p>
    </div>
    <div class="card">
      <img src="censeur.jpg" alt="Censeur" onerror="this.src='https://via.placeholder.com/120?text=Censeur'">
      <h3>Mme Marie BELL</h3>
      <p><strong>Censeur</strong></p>
      <p>P√©dagogie g√©n√©rale</p>
    </div>
    <div class="card">
      <img src="surveillant.jpg" alt="Surveillant g√©n√©ral" onerror="this.src='https://via.placeholder.com/120?text=Surveillant'">
      <h3>M. Paul EKOTO</h3>
      <p><strong>Surveillant g√©n√©ral</strong></p>
      <p>Discipline et vie scolaire</p>
    </div>
  </div>
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour</button>
</div>

<!-- ANCIENS √âL√àVES -->
<div id="anciens" class="page">
  <h1>üéì Nos Anciens √âl√®ves</h1>
  <div class="grid" id="anciensList">
    <div class="card">
      <img src="ancien1.jpg" alt="Ancien" onerror="this.src='https://via.placeholder.com/120?text=Ancien1'">
      <h3>Marc TCHANA</h3>
      <p><strong>Bac 2015</strong></p>
      <p>Ing√©nieur √† Eneo</p>
    </div>
    <div class="card">
      <img src="ancien2.jpg" alt="Ancien" onerror="this.src='https://via.placeholder.com/120?text=Ancien2'">
      <h3>Sophie NZINGA</h3>
      <p><strong>Bac 2018</strong></p>
      <p>Chef d'atelier</p>
    </div>
  </div>
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour</button>
</div>

<!-- JOURNAL / ACTUALIT√âS -->
<div id="journal" class="page">
  <h1>üì∞ Journal du Lyc√©e</h1>
  <div id="articlesList" class="grid">
    <div class="card" style="text-align: left;">
      <h3>Rentr√©e scolaire 2025</h3>
      <p>La rentr√©e aura lieu le 9 septembre 2025. Tous les √©l√®ves sont attendus.</p>
      <small>Publi√© le 15/08/2025</small>
    </div>
    <div class="card" style="text-align: left;">
      <h3>Journ√©es Portes Ouvertes</h3>
      <p>Le lyc√©e organise ses JPO les 20-21 novembre. Venez nombreux !</p>
      <small>Publi√© le 10/08/2025</small>
    </div>
  </div>
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour</button>
</div>

<!-- BULLETINS -->
<div id="bulletins" class="page">
  <h1>üìÑ Consultation des bulletins</h1>
  <div class="form-container">
    <h3>Rechercher un √©l√®ve</h3>
    <input type="text" id="searchEleveBulletin" placeholder="Nom ou pr√©nom..." class="form-input">
    <button class="btn" onclick="searchEleveBulletin()">Rechercher</button>
    
    <div id="bulletinResult" style="margin-top: 20px;"></div>
  </div>
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour</button>
</div>

<!-- RECHERCHE -->
<div id="recherche" class="page">
  <h1>üîç Recherche</h1>
  <div class="form-container">
    <h3>Rechercher un √©l√®ve ou un enseignant</h3>
    <input type="text" id="searchQuery" placeholder="Nom, pr√©nom, mati√®re..." class="form-input">
    <button class="btn" onclick="rechercher()">Rechercher</button>
    
    <div id="searchResults" style="margin-top: 20px;"></div>
  </div>
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour</button>
</div>

<!-- ESPACE ADMIN (CENTRAL) -->
<div id="admin" class="page">
  <h1>‚öôÔ∏è Espace Administration</h1>
  
  <!-- MOT DE PASSE G√âN√âRAL -->
  <div id="adminPasswordBox" class="password-box">
    <h3>üîê Acc√®s s√©curis√©</h3>
    <input type="password" id="adminMasterPassword" placeholder="Mot de passe g√©n√©ral" class="form-input" style="width: 80%;">
    <button class="btn" onclick="checkMasterPassword()">Valider</button>
  </div>
  
  <!-- ZONE ADMIN (visible apr√®s mot de passe) -->
  <div id="adminZone" style="display: none;">
    
    <!-- MENU SP√âCIALIT√âS / CLASSES / MATI√àRES -->
    <div class="admin-section">
      <h3>üìö Navigation par sp√©cialit√©</h3>
      <select id="specialiteSelect" class="form-input" onchange="loadClasses()">
        <option value="">Choisir une sp√©cialit√©</option>
        <option value="electricite">√âlectricit√©</option>
        <option value="mecanique">M√©canique</option>
        <option value="comptabilite">Comptabilit√©</option>
      </select>
      
      <select id="classeSelect" class="form-input" style="display: none;" onchange="loadMatieres()">
        <option value="">Choisir une classe</option>
      </select>
      
      <select id="matiereSelect" class="form-input" style="display: none;" onchange="askMatierePassword()">
        <option value="">Choisir une mati√®re</option>
      </select>
    </div>
    
    <!-- GESTION √âL√àVES -->
    <div class="admin-section">
      <h3>üë®‚Äçüéì Gestion des √©l√®ves</h3>
      <form id="eleveForm">
        <input type="text" placeholder="Nom" class="form-input" id="eleveNom">
        <input type="text" placeholder="Pr√©nom" class="form-input" id="elevePrenom">
        <input type="date" placeholder="Date naissance" class="form-input" id="eleveDate">
        <select class="form-input" id="eleveSpecialite">
          <option>√âlectricit√©</option>
          <option>M√©canique</option>
          <option>Comptabilit√©</option>
        </select>
        <input type="text" placeholder="Classe" class="form-input" id="eleveClasse">
        <input type="text" placeholder="Num√©ro parent" class="form-input" id="eleveParent">
        <button type="button" class="btn" onclick="ajouterEleve()">‚ûï Ajouter √©l√®ve</button>
      </form>
      <div id="elevesList"></div>
    </div>
    
    <!-- GESTION ANCIENS √âL√àVES -->
    <div class="admin-section">
      <h3>üéì Gestion des anciens √©l√®ves</h3>
      <form id="ancienForm">
        <input type="text" placeholder="Nom" class="form-input" id="ancienNom">
        <input type="text" placeholder="Pr√©nom" class="form-input" id="ancienPrenom">
        <input type="text" placeholder="Ann√©e Bac" class="form-input" id="ancienAnnee">
        <input type="text" placeholder="Photo (URL)" class="form-input" id="ancienPhoto">
        <input type="text" placeholder="Parcours" class="form-input" id="ancienParcours">
        <button type="button" class="btn" onclick="ajouterAncien()">‚ûï Ajouter ancien</button>
      </form>
      <div id="anciensAdminList"></div>
    </div>
    
    <!-- GESTION MATI√àRES -->
    <div class="admin-section">
      <h3>üìñ Gestion des mati√®res (coefficients et mots de passe)</h3>
      <form id="matiereForm">
        <input type="text" placeholder="Nom mati√®re" class="form-input" id="matiereNom">
        <input type="number" placeholder="Coefficient" class="form-input" id="matiereCoef">
        <input type="text" placeholder="Sp√©cialit√©" class="form-input" id="matiereSpecialite">
        <input type="text" placeholder="Classe" class="form-input" id="matiereClasse">
        <input type="password" placeholder="Mot de passe" class="form-input" id="matierePassword">
        <button type="button" class="btn" onclick="ajouterMatiere()">‚ûï Ajouter mati√®re</button>
      </form>
      <div id="matieresList"></div>
    </div>
    
    <!-- GESTION ADMINISTRATION -->
    <div class="admin-section">
      <h3>üèõÔ∏è Gestion de l'administration</h3>
      <form id="adminForm">
        <input type="text" placeholder="R√¥le (Proviseur, Censeur...)" class="form-input" id="adminRole">
        <input type="text" placeholder="Nom complet" class="form-input" id="adminNom">
        <input type="text" placeholder="Photo (URL)" class="form-input" id="adminPhoto">
        <input type="text" placeholder="Description" class="form-input" id="adminDesc">
        <button type="button" class="btn" onclick="ajouterAdminMembre()">‚ûï Ajouter membre</button>
      </form>
      <div id="adminAdminList"></div>
    </div>
    
    <!-- GESTION JOURNAL -->
    <div class="admin-section">
      <h3>üì∞ Gestion du journal</h3>
      <form id="articleForm">
        <input type="text" placeholder="Titre" class="form-input" id="articleTitre">
        <textarea placeholder="Contenu" class="form-input" id="articleContenu" rows="4"></textarea>
        <input type="text" placeholder="Photo (URL)" class="form-input" id="articlePhoto">
        <button type="button" class="btn" onclick="publierArticle()">üì§ Publier</button>
      </form>
      <div id="articlesAdminList"></div>
    </div>
    
    <!-- MODIFICATION LOGO -->
    <div class="admin-section">
      <h3>üñºÔ∏è Modifier le logo</h3>
      <input type="text" placeholder="Nouvelle URL du logo" class="form-input" id="newLogoUrl">
      <button class="btn" onclick="updateLogo()">Mettre √† jour le logo</button>
    </div>
    
  </div>
  
  <button class="btn-secondary" onclick="showPage('home')">‚Üê Retour au site</button>
</div>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  // ===== CONFIGURATION SUPABASE =====
  const supabaseUrl = 'https://cxvetkmbhohutyprwxjx.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4dmV0a21iaG9odXR5cHJ3eGp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU4MjA0NzAsImV4cCI6MjA1MTM5NjQ3MH0.Zh4aM3g1Nt4EmRtaIedfKn43GkjjSR-7nVgW3W_6pOw';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  // ===== MOT DE PASSE MASTER =====
  const MASTER_PASSWORD = "LTB2025";

  // ===== VARIABLES GLOBALES =====
  let currentSpecialite = '';
  let currentClasse = '';
  let currentMatiere = '';

  // ===== NAVIGATION =====
  window.showPage = function(pageId) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    
    // R√©initialiser admin si on quitte
    if(pageId !== 'admin') {
      document.getElementById('adminPasswordBox').style.display = 'block';
      document.getElementById('adminZone').style.display = 'none';
      document.getElementById('adminMasterPassword').value = '';
    }
  };

  // ===== V√âRIFICATION MOT DE PASSE MASTER =====
  window.checkMasterPassword = function() {
    const pwd = document.getElementById('adminMasterPassword').value;
    if(pwd === MASTER_PASSWORD) {
      document.getElementById('adminPasswordBox').style.display = 'none';
      document.getElementById('adminZone').style.display = 'block';
      loadAllData();
    } else {
      alert('‚ùå Mot de passe incorrect');
    }
  };

  // ===== CHARGEMENT DES DONN√âES =====
  function loadAllData() {
    loadEleves();
    loadAnciens();
    loadMatieresAdmin();
    loadAdminMembres();
    loadArticlesAdmin()
