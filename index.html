<!DOCTYPE html>
<html>
<head>
    <title>üß™ TEST MINIMAL SHEET.BEST</title>
</head>
<body>
    <h1>üîç Test Sheet.best</h1>
    <p>URL: <code>https://api.sheetbest.com/sheets/70923d86-6d1a-4756-bf21-a869acf3e029</code></p>
    
    <hr>
    
    <h3>Test sans onglet (feuille principale)</h3>
    <button onclick="testPrincipal()">Tester la feuille principale</button>
    
    <h3>Test avec onglet "eleves"</h3>
    <button onclick="testOnglet('eleves')">Tester onglet eleves</button>
    
    <h3>Test avec onglet "anciens"</h3>
    <button onclick="testOnglet('anciens')">Tester onglet anciens</button>
    
    <hr>
    
    <h3>R√©sultat :</h3>
    <pre id="resultat" style="background:#f0f0f0; padding:15px; border-radius:5px;">Clique sur un bouton</pre>

    <script>
    const BASE_URL = 'https://api.sheetbest.com/sheets/70923d86-6d1a-4756-bf21-a869acf3e029';

    function afficher(data, type = 'info') {
        const pre = document.getElementById('resultat');
        if (typeof data === 'string') {
            pre.innerHTML = data;
        } else {
            pre.innerHTML = JSON.stringify(data, null, 2);
        }
        pre.style.color = type === 'error' ? 'red' : 'green';
    }

    async function testPrincipal() {
        afficher('‚è≥ Test en cours...');
        try {
            const res = await fetch(BASE_URL);
            const data = await res.json();
            afficher(data, 'success');
        } catch (err) {
            afficher('‚ùå Erreur : ' + err.message, 'error');
        }
    }

    async function testOnglet(nomOnglet) {
        afficher(`‚è≥ Test de l'onglet "${nomOnglet}"...`);
        
        // ESSAYONS LES DEUX FA√áONS
        const facon1 = `${BASE_URL}/${nomOnglet}`;
        const facon2 = `${BASE_URL}#${nomOnglet}`;
        
        let resultat = `R√©sultats pour l'onglet "${nomOnglet}":\n\n`;
        
        // Test fa√ßon 1 (avec /)
        try {
            const res1 = await fetch(facon1);
            const data1 = await res1.json();
            resultat += `‚úÖ Fa√ßon 1 (/${nomOnglet}) : ${data1.length} √©l√©ment(s)\n`;
        } catch (err1) {
            resultat += `‚ùå Fa√ßon 1 (/${nomOnglet}) : Erreur - ${err1.message}\n`;
        }
        
        // Test fa√ßon 2 (avec #)
        try {
            const res2 = await fetch(facon2);
            const data2 = await res2.json();
            resultat += `‚úÖ Fa√ßon 2 (#${nomOnglet}) : ${data2.length} √©l√©ment(s)\n`;
        } catch (err2) {
            resultat += `‚ùå Fa√ßon 2 (#${nomOnglet}) : Erreur - ${err2.message}\n`;
        }
        
        afficher(resultat, 'success');
    }
    </script>
</body>
</html>
